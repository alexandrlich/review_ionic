"use strict";angular.module("reviyouMobileApp",["ngRoute","ionic"]);
"use strict";angular.module("reviyouMobileApp").directive("errSrc",function(){return{link:function(r,e,c){e.bind("error",function(){c.src!=c.errSrc&&c.$set("src",c.errSrc)})}}});
"use strict";angular.module("reviyouMobileApp").directive("focusMe",["$timeout",function(){return{scope:{trigger:"=focusMe"},link:function(e,i){e.$watch("trigger",function(o){o===!0&&(console.log("trigger",o),i[0].focus(),e.trigger=!1)})}}}]);
"use strict";angular.module("reviyouMobileApp").directive("mainMenu",["User",function(){return{templateUrl:"views/main-menu.html",restrict:"E",replace:!0,link:function(e){e.menuOpened=!1}}}]);
"use strict";angular.module("reviyouMobileApp").directive("profilepic",["$compile",function(i){function t(i,t){var s='<div class="no-photo"><span class="letters">'+t+"</span></div>";i.replaceWith(s)}function s(i,t,s){"true"==s?(i.find("img").css("max-width",t+"px"),i.find("img").css("max-height",t+"px")):(i.find("img").css("width",t+"px"),i.find("img").css("height",t+"px"))}return{restrict:"E",scope:{initials:"@",src:"@",keepRatio:"="},template:'<div class="no-photo"><img /></div>',replace:!0,link:function(e,n,c){c.src?n.find("img").attr("src",c.src):t(n,c.initials),n.find("img").bind("error",function(){t(n,c.initials)}),n.find("img").bind("load",function(){if("true"==c.keepRatio){var t=i('<img src="'+c.src+'" />')(e);n.replaceWith(t),n.find("img").css("display","block"),n.find("img").css("width","auto"),n.find("img").css("height","auto")}s(n,n.prop("offsetWidth"),c.keepRatio)})}}}]);
"use strict";angular.module("reviyouMobileApp").filter("imageTrust",["$sce",function(r){return function(e){return r.trustAsResourceUrl(e)}}]);
"use strict";angular.module("reviyouMobileApp").controller("AddJobCtrl",["$scope","$rootScope","$stateParams","profileProvider","requestProvider","professionProvider","$log","spinner","utils",function(a,e,o,t,r,s,d,i){a.jobData={occupation:"",company_name:"",start_date:"",end_date:""},a.isRequest=o.isRequest,a.addJob=function(){a.jobData.occupation?(""==a.jobData.start_date&&(a.jobData.start_date=0),""==a.jobData.end_date&&(a.jobData.end_date=0),i.show(),o.isRequest?r.addJobRequest(o.id,a.jobData,function(){i.hide(),e.$broadcast("previousView")}):t.addJob(o.id,a.jobData,function(){e.$broadcast("add-job",a.jobData),i.hide(),e.$broadcast("previousView")})):e.$broadcast("errorAlert","Validation Problem","Please make sure that at least occupation is entered(prefferably with company name and dates)")},i.show(),s.getProfessions(function(e){i.hide(),a.professions=angular.copy(e)})}]);
"use strict";angular.module("reviyouMobileApp").controller("ProfileSkillsCtrl",["$scope","$log","spinner","allowedSkills",function(e,l,r,i){e.skills=i}]).controller("AddSkillPopupCtrl",["$scope","$rootScope","$stateParams","skillProvider","profileProvider","requestProvider","$filter","$log","spinner",function(e,l,r,i,o,t,s,d,a){function c(){d.debug("onSuccessAddProfileSkill"),a.hide();var r=s("filter")(e.skills,{id:e.selectedSkillId},!0);r.length?l.$broadcast("add-skill",r[0]):d.error("not found skill by id"),l.$broadcast("previousView")}function n(){a.hide(),l.$broadcast("errorAlert","Creation error!","Sorry, skill cannot be added at this time, please try again later or contact us directly"),l.$broadcast("previousView")}function u(){a.hide(),l.$broadcast("previousView"),l.$broadcast("successAlert")}function k(){a.hide(),l.$broadcast("errorAlert","Creation error!","Sorry, custom skill cannot be requested at this time, please try again later or contact us directly")}e.selectedSkillId=void 0,a.hide(),e.addSkill=function(){d.debug("addSkill id: "+e.selectedSkillId),"undefined"==typeof e.selectedSkillId?l.$broadcast("errorAlert","Validation message","Choose a skill from the list"):(a.show(),o.addProfileSkill(r.id,e.selectedSkillId,c,n))},e.addCustomSkill=function(){e.customSkill?(a.show(),t.addCustomSkillRequest(r.id,e.customSkill,u,k)):l.$broadcast("errorAlert","Validation message","Please enter custom skill name you want to be created")}}]);
"use strict";angular.module("reviyouMobileApp").controller("AddTagsCtrl",["$scope","$rootScope","$state","$log","spinner","tagsProvider","userProvider","User","utils",function(e,t,s,r,a,n,g,c,u){function o(t,s){for(var r=0;r<e.currentTags.length;r++)if(e.currentTags[r].name===t){if(e.currentTags[r].selected=s,s){for(var a=[],n=0;n<e.currentTags[r].subtags.length;n++)a.push(e.currentTags[r].subtags[n].name);g.deselectTags(c.getUserId(),a.join(),function(){for(var t=0;t<e.currentTags[r].subtags.length;t++)e.currentTags[r].subtags[t].selected&&c.removeTag(e.currentTags[r].subtags[t].name),e.currentTags[r].subtags[t].selected=!1})}break}}function l(){a.show(),n.getTags(0,function(t){d(t),r.debug("test2 "+JSON.stringify(e.currentTags)),i(),a.hide()})}function i(){for(var e=c.getSelectedTags(),t=0;t<e.length;t++)T(e[t])||c.removeTag(e[t])}function T(t){for(var s=0;s<e.currentTags.length;s++){if(e.currentTags[s].name===t)return!0;for(var r=0;r<e.currentTags[s].subtags.length;r++)if(e.currentTags[s].subtags[r].name===t)return!0}return!1}function d(t){if(t.length>0){e.currentTags=[],r.debug("testBefore "+JSON.stringify(t));for(var s=0;s<t.length;s++){var a=c.getSelectedTags().indexOf(t[s].name)>-1,n=[];if(t[s].subtags){for(var g=0;g<t[s].subtags.length;g++){var u=c.getSelectedTags().indexOf(t[s].subtags[g])>-1;n.push({name:t[s].subtags[g],selected:u})}e.currentTags.push({name:t[s].name,selected:a,subtags:n})}}}}e.currentTags=[],e.$watch(function(){return c.getSelectedTags().length},function(t){e.selectedTagsCount=t}),l(),e.navViewSelectedTags=function(){c.getSelectedTags().length>0?s.go("tabs.viewselectedtags"):t.$broadcast("errorAlert","Select Interests","Please choose a few interests.")},e.navPopularFromTags=function(){c.getSelectedTags().length>0?s.go("tabs.popular"):t.$broadcast("errorAlert","Select Interests","Please choose a few interests.")},e.clickTag=function(e,t){u.playMedia("tags.wav"),t?g.deselectTags(c.getUserId(),e,function(){o(e,!1),c.removeTag(e)}):g.selectTag(c.getUserId(),e,function(){o(e,!0),c.addTag(e)})},e.clickSubTag=function(t,s,r){u.playMedia("tags.wav");for(var a=0;a<e.currentTags.length;a++)if(e.currentTags[a].name===t){r||g.deselectTags(c.getUserId(),t,function(){e.currentTags[a].selected=!1,c.removeTag(t)});for(var n=0;n<e.currentTags[a].subtags.length;n++)if(e.currentTags[a].subtags[n].name===s){r?g.deselectTags(c.getUserId(),s,function(){e.currentTags[a].subtags[n].selected=!1,c.removeTag(s)}):g.selectTag(c.getUserId(),s,function(){e.currentTags[a].subtags[n].selected=!0,c.addTag(s)});break}break}}}]);
"use strict";angular.module("reviyouMobileApp").controller("BookmarksCtrl",["$scope","$rootScope","bookmarkProvider","$log","spinner","utils",function(o,e,r,k,a){o.bookmarks=[],o.noResults=!1,a.show(),r.getBookmarkedProfiles(function(e){o.bookmarks.splice(0,o.bookmarks.length),angular.forEach(e,function(e){o.bookmarks.push(angular.extend(e,{bookmarked:!0}))}),0==o.bookmarks.length&&(o.noResults=!0),a.hide()}),o.deleteBookmark=function(k){e.$broadcast("deleteConfirm",function(){a.show(),r.unBookmarkProfile(k,function(){for(var e=0;e<o.bookmarks.length;e++)if(o.bookmarks[e].id===k){o.bookmarks.splice(e,1);break}a.hide()})})},e.$on("deleteBookmark",function(e,n){k.debug("bookmarkToDelete Id: "+n),a.show(),r.unBookmarkProfile(n,function(){for(var e=0;e<o.bookmarks.length;e++)if(o.bookmarks[e].id===n){o.bookmarks.splice(e,1);break}a.hide()})})}]);
"use strict";angular.module("reviyouMobileApp").controller("CommentCtrl",["$scope","$rootScope","commentProvider","User","$log","spinner","utils",function(o,e,t,n,m,r,c){function s(e,n){t.unvote(e,n,function(){for(var t=0;t<o.comments.length;t++)if(o.comments[t].comment_id===e){switch(n){case"group_warm":o.comments[t].warm_voted=!1,o.comments[t].warm_count>0&&o.comments[t].warm_count--;break;case"group_cold":o.comments[t].cold_voted=!1,o.comments[t].cold_count>0&&o.comments[t].cold_count--;break;case"group_troll":o.comments[t].troll_voted=!1,o.comments[t].troll_count>0&&o.comments[t].troll_count--;break;case"group_report":o.comments[t].report_voted=!1,o.comments[t].report_count>0&&o.comments[t].report_count--}break}r.hide()})}function l(e,n){t.vote(e,n,function(){for(var t=0;t<o.comments.length;t++)if(o.comments[t].comment_id===e){switch(n){case"group_warm":o.comments[t].warm_voted=!0,"undefined"==typeof o.comments[t].warm_count?o.comments[t].warm_count=1:o.comments[t].warm_count++;break;case"group_cold":o.comments[t].cold_voted=!0,"undefined"==typeof o.comments[t].cold_count?o.comments[t].cold_count=1:o.comments[t].cold_count++;break;case"group_troll":o.comments[t].troll_voted=!0,"undefined"==typeof o.comments[t].troll_count?o.comments[t].troll_count=1:o.comments[t].troll_count++;break;case"group_report":o.comments[t].report_voted=!0,"undefined"==typeof o.comments[t].report_count?o.comments[t].report_count=1:o.comments[t].report_count++}break}r.hide()})}o.user_id=n.getUserId();var a=0;o.comments=[],o.newComment="",o.moreDataCanBeLoaded=!0,o.loadMore=function(){console.log("loadmore"),t.getComments(o.profile.id,a,function(e){o.comments=o.comments.concat(e),0==e.length&&(o.moreDataCanBeLoaded=!1),o.$broadcast("scroll.infiniteScrollComplete"),a+=e.length,c.resizeScroll()})},o.loadMore(),o.sendComment=function(){o.newComment?(r.show(),t.addProfileComment(o.profile.id,o.newComment,function(e){o.comments.unshift({comment_id:e.comment_id,text:e.text,create_time:e.create_time,user_first_name:e.user_first_name,user_id:e.user_id,user_last_name:e.user_last_name,user_image_url:n.getUserValue("user_image_url")}),o.newComment="",a++,o.profile.comments_count++,r.hide(),!o.profile.is_bookmarked&&n.getFollowOnCommentOption()&&o.changeProfileBookmarkState()})):e.$broadcast("errorAlert","Validation","Please Enter some text if you are trying to comment on the profile")},o.commentVote=function(o,e,t){r.show(),t?s(o,e):l(o,e)},o.deleteComment=function(n){e.$broadcast("deleteConfirm",function(){r.show(),t.removeProfileComment(n,function(){m.info("comment was removed, id:"+n),o.profile.comments_count--})})}}]);
"use strict";angular.module("reviyouMobileApp").controller("ContactUsCtrl",["$scope","$rootScope","contactProvider","spinner","utils",function(o,t,e,s){o.problem={subject:"General question",description:""},o.submitForm=function(){s.show(),e.postFeedback(o.problem,function(){s.hide(),t.$broadcast("successAlert",function(){$state.go("tabs.search")})})}}]);
"use strict";angular.module("reviyouMobileApp").controller("CreateProfileCtrl",["$scope","$rootScope","$state","$stateParams","profileProvider","professionProvider","$log","spinner","utils",function(e,r,o,a,t,i,n,l,s){function f(r){n.debug("onCreateSuccess "+JSON.stringify(r)),t.resetCreateProfileData(),e.newProfile=t.getCreateProfileData(),l.hide(),o.go("tabs.profileCreate3")}function c(e){n.error("onCreationError "+JSON.stringify(e)),l.hide()}e.newProfile=t.getCreateProfileData(),"undefined"!=typeof a.loadProfession?(l.show(),i.getProfessions(function(r){e.professions=angular.copy(r),l.hide()})):l.hide(),e.nextPage=function(){e.newProfile.name&&s.validateEmail(e.newProfile.email)?o.go("tabs.profileCreate2",{loadProfession:"true"}):r.$broadcast("errorAlert","Validation Problem","Please make sure first, last name and email are entered correctly.")},e.createProfile=function(){e.newProfile.jobs[0].occupation?(l.show(),t.createProfile(e.newProfile,f,c)):r.$broadcast("errorAlert","Validation Problem","Please make sure that at least occupation is entered(prefferably with company name and dates)")}}]);
"use strict";angular.module("reviyouMobileApp").controller("ErrorPageCtrl",["$scope","$stateParams",function(r,e){r.errorCode=e.code,r.customErrorMessage=e.customMessage}]);
"use strict";angular.module("reviyouMobileApp").controller("IntroCtrl",["$scope","$state","$ionicSlideBoxDelegate","spinner",function(e,n,t,i){i.hide(),t.slide(0),e.next=function(e){"undefined"==typeof e&&(e=0),4>e?t.next():n.go("tabs.addtags")},e.previous=function(e){"undefined"==typeof e&&(e=0),0==e?n.go("tabs.addtags"):t.previous()},e.slideChanged=function(n){e.slideIndex=n}}]);
"use strict";angular.module("reviyouMobileApp").controller("LoginCtrl",["$rootScope","$scope","AuthorizationService","SignupService","userProvider","$state","$log","$timeout","utils",function(o,n,i,r,s,a,t,e,g){function l(n,i,r){return g.validatePassword(i)?g.validateEmail(n)?i!=r?(o.$broadcast("errorAlert","Validation","Please make sure password is entered correctly twice."),!1):!0:(o.$broadcast("errorAlert","Email validation","Email you entered seems to be invalid."),!1):(o.$broadcast("errorAlert","Password validation","Password should contain 1 uppercase, 1 lowercase letter, 1 number and be at least 6 characters long"),!1)}navigator&&navigator.splashscreen&&navigator.splashscreen.hide(),n.signUpObj=r.initSignUpObj(),n.forgotObj=r.initResetPasswordobj(),n.signInObj={email:"",password:""},n.login=i.login;var u=!0,d=!1;n.showSignInPage=function(){return d},n.showMainLoginPage=function(){return u},n.goToReviyouSignIn=function(){u=!1,e(function(){d=!0},300)},n.goToMainLogin=function(){d=!1,e(function(){u=!0},300)},n.signIn=function(){l(n.signInObj.email,n.signInObj.password,n.signInObj.password)&&i.login("reviyou",n.signInObj)},n.signUp=function(){a.go("blank.signUp")},n.forgotPassword=function(){a.go("blank.forgotPassword")},n.forgotPasswordSubmit=function(){l(n.forgotObj.email,n.forgotObj.password,n.forgotObj.password_repeat)&&r.resetPass(n.forgotObj)},n.logout=function(){s.logout(),a.go("blank.login")},n.signUpSubmit=function(){return l(n.signUpObj.email,n.signUpObj.password,n.signUpObj.password_repeat)?n.signUpObj.first_name&&n.signUpObj.last_name?void r.register(n.signUpObj):void o.$broadcast("errorAlert","Validation","First or last name is missing."):void 0}}]);
"use strict";angular.module("reviyouMobileApp").controller("MainMenuCtrl",["$scope","$rootScope","notificationsProvider","User",function(t,n,o,i){t.$watch(function(){return i.getSelectedTags().length},function(n){t.selectedTagsCount=n}),t.$watch(function(){return i.getUserData()},function(n){t.user=n}),n.$watch(function(){return i.getNotificationsCount()},function(t){n.newNotificationsCount=t});ionic.Platform.isIOS(),ionic.Platform.isAndroid()}]);
"use strict";angular.module("reviyouMobileApp").controller("MainCtrl",["$rootScope","$state","notificationsProvider","User",function(o,n,t,i){navigator&&navigator.network&&navigator.network.connection.type==Connection.NONE?(o.$broadcast("errorAlert","Warning!","You have no internet connection, please try again later."),n.go("blank.login")):(t.checkRecentNotificationsCount(function(o){i.setNotificationsCount(o.newNotificationsCount)}),n.go("tabs.popular"))}]);


"use strict";angular.module("reviyouMobileApp").controller("NotificationsCtrl",["$scope","notificationsProvider","spinner","$state","$ionicListDelegate","User",function(i,o,n,t,e,c){function a(t){n.show(),o.acknowledge(t.id,function(){i.notifications[i.notifications.indexOf(t)].ack=!0,c.decrNotificationsCount(),e.closeOptionButtons(),n.hide()})}var f=0;i.notifications=[],i.moreDataCanBeLoaded=!0,i.loadMore=function(){o.getNotifications(f,function(o){i.notifications=i.notifications.concat(o),0==o.length&&(i.moreDataCanBeLoaded=!1),i.$broadcast("scroll.infiniteScrollComplete"),f+=o.length})},i.ack=function(i){a(i)},i.remove=function(t){n.show(),o.remove(t.id,function(){i.notifications.splice(i.notifications.indexOf(t),1),e.closeOptionButtons(),n.hide()})},i.viewProfile=function(i){a(i),"undefined"!=typeof analytics&&analytics.trackEvent("Profile","viewProfile",i.profile_id,"fromNotification"),t.go("tabs.profile",{id:i.profile_id})}}]);
"use strict";angular.module("reviyouMobileApp").controller("PopularCtrl",["$scope","popularProvider","$rootScope","$log","spinner","User","$ionicSideMenuDelegate","$stateParams",function(e,a,t,n,o,r,l,g){function s(){"undefined"!=typeof g.tagName&&g.tagName.length>0?(e.newTag=!1,r.getSelectedTags().indexOf(g.tagName)>-1?e.currentTagName=g.tagName:(e.currentTagName=g.tagName,e.userTags[0].selected=!1,e.userTags.push({name:g.tagName,selected:!0}),e.newTag=g.tagName)):e.currentTagName=r.getSelectedTags().join(),u=0,e.popular=[],e.noResults=!1}e.onSwipeLeft=function(){l.toggleLeft()},e.$on("$ionicView.leave",function(){l.canDragContent(!0)}),l.canDragContent(!1);var u;e.moreDataCanBeLoaded=!0,e.userTags=[],e.userTags.push({name:"all",selected:!0});for(var c=0;c<r.getSelectedTags().length;c++)e.userTags.push({name:r.getSelectedTags()[c],selected:!1});e.loadMore=function(t){t&&o.show(),a.getPopularProfiles(u,e.currentTagName,function(a){e.popular=e.popular.concat(a),0==a.length&&(e.moreDataCanBeLoaded=!1,0==e.popular.length&&(e.noResults=!0)),e.$broadcast("scroll.infiniteScrollComplete"),u+=a.length,t&&o.hide()})},e.filterPopular=function(a){if(!a.selected){e.currentTagName="all"===a.name?r.getSelectedTags().join():a.name,e.newTag=a.name==g.tagName?g.tagName:!1;for(var t=0;t<e.userTags.length;t++)e.userTags[t].selected=a.name!==e.userTags[t].name?!1:!0;u=0,e.popular=[],e.noResults=!1,e.loadMore(!0)}},s()}]);
"use strict";angular.module("reviyouMobileApp").controller("ProfileCtrl",["$scope","$rootScope","profileProvider","requestProvider","bookmarkProvider","User","$log","spinner","$ionicModal","profileDetails","$state","utils","$ionicScrollDelegate","$timeout",function(o,e,i,l,n,r,s,t,f,a,u,c,d,p){o.toggleGroup=function(e){o.isGroupShown(e)?o.shownGroup=null:(o.shownGroup=e,p(function(){d.scrollTop()},100)),c.resizeScroll()},o.isGroupShown=function(e){return o.shownGroup===e},o.addSkillNav=function(){u.go("tabs.addSkill",{id:a.id,profileTags:a.tags.join()})},f.fromTemplateUrl("votepage.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.modal=e}),e.bodyClass="container-profile",o.user_id=r.getUserId(),o.profile={},o.initials="",o.maxVisibleSkills=3,o.skills=[],e.$on("add-skill",function(e,i){o.profile.skills||(o.profile.skills=[]);var l=angular.extend({},i,{skill_average_rank:null,vote_value:null,votes_count:0});o.profile.skills.unshift(l),c.resizeScroll()}),e.$on("add-job",function(e,i){o.profile.jobs.unshift(i),c.resizeScroll()}),e.$on("shareProfile",function(){s.debug("shareProfile, profileID:"+o.profile.id),window.plugins.socialsharing.share("Check out this profile on Reviyou:",null,null,"http://reviyou.com/share/"+o.profile.id)}),o.fetchSkills=function(){o.profile.skills&&(o.skills=o.profile.skills.slice(0,o.maxVisibleSkills))},o.removeProfile=function(){e.$broadcast("deleteConfirm",function(){t.show(),i.deleteProfile(o.profile.id,function(){t.hide(),e.$broadcast("successAlertCompleted",function(){u.go("tabs.search")})})})},o.requestToRemoveProfile=function(){e.$broadcast("deleteConfirm",function(){t.show(),l.deleteProfileRequest(o.profile.id,function(){e.$broadcast("successAlert"),t.hide()})})},o.changeProfileBookmarkState=function(){t.show(),o.profile.is_bookmarked?("undefined"!=typeof analytics&&analytics.trackEvent("Profile","follow",o.profile.id),n.unBookmarkProfile(o.profile.id,function(){o.profile.is_bookmarked=!1,t.hide()})):("undefined"!=typeof analytics&&analytics.trackEvent("Profile","unfollow",o.profile.id),n.bookmarkProfile(o.profile.id,function(){o.profile.is_bookmarked=!0,t.hide()}))},o.openVote=function(){i.setIsGeneral(!0),o.openModal()},o.openSkillVote=function(e){i.setActiveSkillId(e),i.setIsGeneral(!1),o.openModal()},o.openModal=function(){o.modal.show(),o.$broadcast("initVotePopup")},o.closeModal=function(){o.modal.hide()},o.$on("$destroy",function(){o.modal.remove()}),o.showAllSkills=function(){o.skills=o.profile.skills,o.skillsShortcut=!1},o.skillsShortcut=function(){return o.profile&&o.profile.skills?o.profile.skills.length-o.skills.length>0:!1},function(){o.profile=a,o.fetchSkills(),e.profileTheme=a.theme_name,e.$broadcast("initProfileTopBarHeaderBugFixEnter"),t.hide()}()}]);
"use strict";angular.module("reviyouMobileApp").controller("QuickSearchCtrl",["$scope","$rootScope","$window","$location","$log","spinner","$state",function(c,i,r,e,t,n,a){t.debug("QuickSearchCtrl init"),c.quickSearchString="",c.quickSearch=function(){t.debug("quickSearch, quickSearchString:"+c.quickSearchString),"undefined"!=typeof analytics&&analytics.trackEvent("Search","quick",c.quickSearchString),n.show(),a.go("tabs.searchString",{searchString:c.quickSearchString})}}]);
"use strict";angular.module("reviyouMobileApp").controller("SearchCtrl",["$scope","searchProvider","$stateParams","$log","spinner",function(e,r,c,a,n){function s(){"undefined"!=typeof c.searchString&&c.searchString.length>0?(e.searchString=c.searchString,t()):n.hide()}function t(){a.debug("search, search str: "+e.searchString),n.show(),r.search(e.searchString,function(r){a.debug("search result using search key="+e.searchString),e.searchResult=r,a.debug("search result2"),e.searchPerformed=!0,n.hide()})}e.searchString="",e.searchPerformed=!1,s(),e.search=function(){"undefined"!=typeof analytics&&analytics.trackEvent("Search","normal",e.searchString),t()},e.change=function(){e.searchPerformed=!1},e.clearSearch=function(){e.searchString="",e.searchResult="",e.searchPerformed=!1}}]);
"use strict";angular.module("reviyouMobileApp").controller("SettingsCtrl",["$scope","userProvider","User",function(n,t,e){n.settingsSound=e.getSoundsEnabledOption(),n.followOnComment=e.getFollowOnCommentOption(),n.changeSoundSetting=function(){var o=!n.settingsSound;"undefined"!=typeof analytics&&analytics.trackEvent("Settings","Sound","newValue",o),t.saveSoundSetting(e.getUserId(),o,function(){e.setSoundsEnabledOption(o),n.settingsSound=o})},n.changeFollowOnCommentSetting=function(){var o=!n.followOnComment;"undefined"!=typeof analytics&&analytics.trackEvent("Settings","Following","newValue",o),t.saveFollowSetting(e.getUserId(),o,function(){e.setFollowOnCommentOption(o),n.followOnComment=o})}}]);
"use strict";angular.module("reviyouMobileApp").controller("TermsCtrl",["$scope","$state","User","AuthorizationService","userProvider","spinner",function(e,t,r,n,o,i){function s(){i.show(),o.saveTermsAgreement(r.getUserId(),function(){r.setUserData({terms_signed:!0})}),t.go("blank.intro")}e.isAccepted=r.getUserValue("terms_signed"),e.agree=function(e){return e?void s():("undefined"!=typeof analytics&&analytics.trackEvent("Category1","Terms&Conditions","NotAgree"),i.hide(),o.logout(),void t.go("blank.login"))}}]);
"use strict";angular.module("reviyouMobileApp").controller("TopBarCtrl",["$scope","$rootScope","$window","$log","$state","pushNotificationsProvider",function(o,r){o.quickSearchString="",o.share=function(){r.$broadcast("shareProfile")},r.previousView=function(){r.$broadcast("previousView")}}]);
"use strict";angular.module("reviyouMobileApp").controller("ViewSelectedTagsCtrl",["$scope","$state","$log","spinner","tagsProvider","userProvider","User","utils",function(e,s,t,a,r,l,g,o){e.selectedTags=g.getSelectedTags(),e.removeTag=function(s){o.playMedia("tags.wav"),l.deselectTags(g.getUserId(),s,function(){for(var t=0;t<e.selectedTags.length;t++)if(e.selectedTags[t]===s){e.selectedTags.splice(t,1);break}g.removeTag(s)})}}]);
"use strict";angular.module("reviyouMobileApp").controller("VotedProfilesCtrl",["$scope","$log","spinner","utils","voteProvider",function(e,o,t,l,i){e.votedProfiles=[];var r=0;e.noResults=!1,e.moreDataCanBeLoaded=!0,e.loadMore=function(){i.getVotedProfiles(r,function(o){e.votedProfiles=e.votedProfiles.concat(o),0==o.length&&(e.moreDataCanBeLoaded=!1,0==e.votedProfiles.length&&(e.noResults=!0)),e.$broadcast("scroll.infiniteScrollComplete"),r+=o.length})},e.remove=function(o){t.show(),i.hideVotedProfile(o.id,function(){e.votedProfiles.splice(e.votedProfiles.indexOf(o),1),t.hide()})}}]);
"use strict";angular.module("reviyouMobileApp").controller("VotePageCtrl",["$scope","$rootScope","$timeout","profileProvider","voteProvider","$log","spinner","utils",function(e,o,t,i,l,n,r,a){function s(o,t){var n={profile_id:i.getProfileProp("id"),generalVote:o,anonymous:!0,is_revote:t};"undefined"!=typeof analytics&&analytics.trackEvent("Vote1","General",n.profile_id,o),r.show(),l.voteProfile(n,function(t){e.profile.general_vote=o,e.profile.general_average_rank=t.general_average_rank,e.profile.votes_count=t.votes_count,e.previousVote=o,e.autoclose()})}function u(o,t){var n={skill_id:c.id,profile_id:i.getProfileProp("id"),vote_value:o,anonymous:!0,is_revote:t};"undefined"!=typeof analytics&&analytics.trackEvent("Vote1",c.skill_name,n.profile_id,o),r.show(),l.voteProfileSkill(n,function(t){angular.forEach(e.profile.skills,function(e){e.id===c.id&&(e.skill_average_rank=t.skill_average_rank,e.vote_value=o,e.votes_count=t.votes_count)}),e.previousVote=o,e.autoclose()})}var v,c;e.$on("initVotePopup",function(){e.previousVote="",e.choosedSkillVote="",v=i.getIsGeneral(),n.log("isGeneral "+v),v?e.previousVote=e.profile.general_vote:(c=i.getActiveSkill(),c&&(e.previousVote=c.vote_value)),n.log("previousVote "+e.previousVote)}),e.voteMarks=[1,2,3,4,5,6,7,8,9,10],e.setVote=function(o){var t="undefined"==typeof e.previousVote?!1:!0;a.playMedia("select.wav"),v?s(o,t):u(o,t)},e.autoclose=function(){r.hide(),e.modal.hide()},e.close=function(){"undefined"!=typeof analytics&&analytics.trackEvent("Vote1","UserClose","VotePage"),e.autoclose()}}]);
"use strict";angular.module("reviyouMobileApp").factory("appConfig",function(){var e={apiHost:"https://api.reviyou.com/api/1.2.2/rest",fbAppId:731640560179788,ryAppId:"731640560179700",analyticsKey:"UA-61578002-4",analyticsDebugMode:!1,googleParams:{client_id:"978856174959-kuo3hm532kc2r592khmc2s8qb5n76mhn.apps.googleusercontent.com",client_secret:"FlF9V8Sypw5jsZnMgmra1pLh",redirect_uri:"http://localhost",scope:"https://www.googleapis.com/auth/userinfo.profile email",project_id:"978856174959"},oAuthIOPublicKey:"cFvVKe81P5mP6eygHE-UrIUYv10"};return{getAppConfig:function(){return e}}});
"use strict";angular.module("reviyouMobileApp").factory("bookmarkProvider",["defaultProvider",function(o){var r="/bookmark/profile";return{bookmarkProfile:function(e,c){o.create(r+"/"+e,{success:c})},unBookmarkProfile:function(e,c){o.remove(r,{id:e,success:c})},getBookmarkedProfiles:function(r){o.fetch("/bookmark",{success:r})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("commentProvider",["defaultProvider",function(e){var o="/comment",t="/comment2/vote",c="/comment2/unvote";return{getComments:function(t,c,n){var m={offset:c};e.fetch(o,{data:{params:m},id:t,success:n})},removeProfileComment:function(t,c){e.remove(o,{id:t,success:c})},addProfileComment:function(t,c,n){e.create(o,{body:{text:c},id:t,success:n})},vote:function(o,c,n){e.create(t,{body:{group_name:c,comment_id:o},success:n})},unvote:function(o,t,n){e.create(c,{body:{group_name:t,comment_id:o},success:n})}}}]);
"use strict";angular.module("reviyouMobileApp").config(["$urlRouterProvider","$stateProvider","errorInterceptorProvider","$httpProvider","$logProvider","$ionicConfigProvider",function(t,e,l,r,a,s){a.debugEnabled(!1),s.views.swipeBackEnabled(!1),s.backButton.text("").icon("ion-ios-arrow-back"),s.views.maxCache(10),e.state("tabs",{url:"/tab","abstract":!0,templateUrl:"tabs.html"}).state("tabs.popular",{url:"/popular",views:{"home-tab":{templateUrl:"views/popular.html",controller:"PopularCtrl"},"blank-tab":{templateUrl:"views/popular.html",controller:"PopularCtrl"}}}).state("tabs.popularByTag",{url:"/popular/:tagName",views:{"home-tab":{templateUrl:"views/popular.html",controller:"PopularCtrl"}}}).state("tabs.search",{url:"/search",views:{"home-tab":{templateUrl:"views/search.html"}}}).state("tabs.searchString",{url:"/search/:searchString",views:{"home-tab":{templateUrl:"views/search.html"}}}).state("tabs.votedprofiles",{url:"/votedprofiles",views:{"home-tab":{templateUrl:"views/voted-profiles.html",controller:"VotedProfilesCtrl"}}}).state("tabs.notifications",{url:"/notifications",views:{"home-tab":{templateUrl:"views/notifications.html",controller:"NotificationsCtrl"}}}).state("tabs.news",{url:"/news",views:{"home-tab":{templateUrl:"views/news.html",controller:"NewsCtrl"}}}).state("tabs.singlenews",{url:"/news/single/:id",views:{"home-tab":{templateUrl:"views/news-article.html",controller:"NewsArticleCtrl"}}}).state("tabs.bookmarks",{url:"/bookmarks",views:{"home-tab":{templateUrl:"views/bookmarks.html",controller:"BookmarksCtrl"}}}).state("tabs.profile",{url:"/profile/:id",views:{"home-tab":{templateUrl:"views/profile.html",controller:"ProfileCtrl"}},resolve:{profileDetails:["profileProvider","$stateParams","spinner",function(t,e,l){return l.show(),t.getProfile(e.id)}]}}).state("tabs.profileCreate1",{url:"/profile/create1",views:{"home-tab":{templateUrl:"views/createprofile1.html"}}}).state("tabs.profileCreate2",{url:"/profile/create2/:loadProfession",views:{"home-tab":{templateUrl:"views/createprofile2.html"}}}).state("tabs.profileCreate3",{url:"/profile/create3",views:{"home-tab":{templateUrl:"views/createprofile3.html"}}}).state("tabs.addSkill",{url:"/profile/addSkill/:id/:profileTags",views:{"home-tab":{templateUrl:"views/add-skill-popup.html",controller:"ProfileSkillsCtrl"}},resolve:{allowedSkills:["skillProvider","$stateParams","spinner",function(t,e,l){return l.show(),t.getSkills(e.profileTags)}]}}).state("tabs.addJob",{url:"/profile/addJob/:id/:isRequest",views:{"home-tab":{templateUrl:"views/add-job.html"}}}).state("tabs.contact",{url:"/contact-us",views:{"home-tab":{templateUrl:"views/contact-us.html"}}}).state("tabs.settings",{url:"/settings",views:{"home-tab":{templateUrl:"views/settings.html",controller:"SettingsCtrl"}}}).state("tabs.signterms",{url:"/signterms",views:{"home-tab":{templateUrl:"views/signterms.html"}}}).state("tabs.viewterms",{url:"/viewterms",views:{"home-tab":{templateUrl:"views/viewterms.html"}}}).state("blank.intro",{url:"/intro",views:{"home-tab":{templateUrl:"views/intro.html",controller:"IntroCtrl"},"blank-tab":{templateUrl:"views/intro.html",controller:"IntroCtrl"}}}).state("tabs.viewselectedtags",{url:"/viewselectedtags",views:{"home-tab":{templateUrl:"views/view-selected-tags.html",controller:"ViewSelectedTagsCtrl"}}}).state("tabs.addtags",{url:"/addtags",views:{"home-tab":{templateUrl:"views/add-tags.html",controller:"AddTagsCtrl"}}}).state("blank",{url:"/blank","abstract":!0,templateUrl:"blank.html"}).state("blank.login",{url:"/login",views:{"blank-tab":{templateUrl:"views/authorization/login.html",controller:"LoginCtrl"},"home-tab":{templateUrl:"views/authorization/login.html",controller:"LoginCtrl"}}}).state("blank.signUp",{url:"/signUp",views:{"blank-tab":{templateUrl:"views/authorization/signUp.html",controller:"LoginCtrl"}}}).state("blank.signUpSubmitted",{url:"/signUpSubmitted",views:{"blank-tab":{templateUrl:"views/authorization/signUpSubmitted.html"}}}).state("blank.forgotPassword",{url:"/forgotPassword",views:{"blank-tab":{templateUrl:"views/authorization/forgotPassword.html",controller:"LoginCtrl"}}}).state("blank.forgotPasswordSubmitted",{url:"/forgotPassword",views:{"blank-tab":{templateUrl:"views/authorization/forgotPasswordSubmitted.html"}}}).state("blank.main",{url:"/main",views:{"home-tab":{template:"",controller:"MainCtrl"},"blank-tab":{template:"",controller:"MainCtrl"}}}).state("tabs.error",{url:"/error/:code",views:{"home-tab":{templateUrl:"views/error-page.html"},"blank-tab":{templateUrl:"views/error-page.html"}}}).state("tabs.errorWithMessage",{url:"/error/:code/:customMessage",views:{"blank-tab":{templateUrl:"views/error-page.html"},"home-tab":{templateUrl:"views/error-page.html"}}}),t.otherwise("/blank/main"),l.initialize(r)}]);
"use strict";angular.module("reviyouMobileApp").factory("contactProvider",["defaultProvider",function(e){var c="/feedback";return{postFeedback:function(t,r){e.create(c,{body:{subject:t.subject,description:t.description},success:r})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("defaultProvider",["$http","utils","User","$log",function(r,a,t,e){function u(r,a){var t=a.id&&"/"+a.id||"";return r+t}function n(r,a){var t=U[a];return t||(t=U.DEFAULT),r=r||{},r.data=r.data||{},r.success=r.success||s,r.error=r.error||o,t(r)}function s(){e.log("request successfully handled")}function o(r,a,t){e.error("exception: "+r+" status: "+a+" headers: "+t)}function c(r){return angular.isObject(r)&&r._id&&!r.id&&(r.id=r._id,delete r._id),angular.isArray(r)&&p>0&&(p--,angular.forEach(r,c)),p=3,r}function d(r){return c(r)}function i(){return{user_id:t.getUserId(),user_token:t.getAuthToken()}}function f(t,e){var s=u(t,e);e=n(e,g.POST),e.withoutAuthData||angular.extend(e.body,i()),r.post(a.apiUrl(s),e.body,e.data).success(function(r){0===r.status?(d(r.data),e.success(r.data,r)):e.error(r,r)}).error(e.error)}function l(t,e){var s=u(t,e);e=n(e,g.PUT),angular.extend(e.body,i()),r.put(a.apiUrl(s),e.body).success(function(r){0===r.status&&(d(r.data),e.success(r.data,r))}).error(e.error)}function E(t,e){var s=u(t,e);e=n(e,g.DELETE),angular.extend(e.data.params,i()),r["delete"](a.apiUrl(s),e.data).success(function(r){0===r.status&&(d(r.data),e.success(r.data,r))}).error(e.error)}function T(t,e){var s=u(t,e);e=n(e,g.GET),angular.extend(e.data.params,i()),r.get(a.apiUrl(s),e.data).success(function(r){0===r.status&&(d(r.data),e.success(r.data,r))}).error(e.error)}var p=3,g={DELETE:"DELETE",POST:"POST",GET:"GET",PUT:"PUT"},U={POST:function(r){return r.body=r.body||{},r},GET:function(r){return r.data.params=r.data.params||{},r},DELETE:function(r){return r.data.params=r.data.params||{},r},DEFAULT:function(r){return r}};return{create:f,fetch:T,remove:E,update:l}}]);
"use strict";angular.module("reviyouMobileApp").factory("deviceInfo",["$log",function(e){return{getDeviceInfo:function(){return e.debug("start getting device info "+device.model),{model:device.model,uuid:device.uuid,version:device.version,platform:device.platform}}}}]);
"use strict";angular.module("reviyouMobileApp").provider("errorInterceptor",function(){function r(r,t,o,n){var a;e.hasOwnProperty(r)?(a=e[r])(t,n):t.go("tabs.errorWithMessage",{code:r,customMessage:o})}function t(t,e,n,a,s,i){return{request:function(r){return navigator&&navigator.network&&navigator.network.connection.type===Connection.NONE&&"https"===r.url.substring(0,5)?(i.$broadcast("errorAlert","Warning","No Internet connection"),r.data=o,t.reject(r)):(r.timeout=2e4,r||t.when(r))},requestError:function(o){return s.hide(),r("request",e.get("$state"),"",i),t.reject(o)},response:function(o){return o.data&&o.data.status>0&&(n.debug("res custom error "+JSON.stringify(o.data.status)),s.hide(),10008==o.data.status?i.$broadcast("errorAlert","Validation Problem",o.data.error_message):10017==o.data.status?i.$broadcast("errorAlert","Validation Problem",o.data.error_message):r(o.data.status,e.get("$state"),o.data.error_message,i)),o||t.when(o)},responseError:function(a){return n.debug("res Error "+JSON.stringify(a)),s.hide(),0===a.status?r("timeout",e.get("$state"),"",i):o===a.data||r(a.status,e.get("$state"),"",i),t.reject(a)}}}var e={500:function(r){r.go("tabs.error",{code:"500"})},401:function(r){r.go("tabs.error",{code:"401"})},403:function(r){r.go("tabs.error",{code:"403"})},404:function(r){r.go("tabs.error",{code:"404"})},request:function(r){r.go("tabs.error",{code:"request"})},timeout:function(r,t){t.$broadcast("errorAlert","Server timeout","Our servers are currently overloaded, please try again later.")}},o="NO_INTERNET_REQUEST";return t.$inject=["$q","$injector","$log","utils","spinner","$rootScope"],{initialize:function(r){r.interceptors.push(t)},$get:function(){return new errorInterceptor}}});
"use strict";

"use strict";angular.module("reviyouMobileApp").factory("notificationsProvider",["defaultProvider",function(i){var o="/notifications",t="/notifications/ack",n="/notifications/remove",c="/notifications/newCount";return{getNotifications:function(t,n){var c={offset:t};i.fetch(o,{data:{params:c},success:function(i){n(i)}})},acknowledge:function(o,n){i.update(t,{body:{},id:o,success:n})},remove:function(o,t){i.remove(n,{id:o,success:t})},checkRecentNotificationsCount:function(o){i.fetch(c,{success:function(i){o(i)}})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("popularProvider",["defaultProvider","utils","User",function(r){var a="/popular";return{getPopularProfiles:function(e,o,t){var u={offset:e,tags:o};r.fetch(a,{data:{params:u},success:function(r){t(r)}})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("professionProvider",["defaultProvider",function(e){var o="/professions";return{getProfessions:function(r){e.fetch(o,{success:r})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("profileProvider",["$q","defaultProvider",function(e,t){function r(r){var n=e.defer(),o=function(e){f(e),n.resolve(e)};return t.fetch(k,{id:r,success:o}),n.promise}function n(e,r,n){t.create(k,{body:e,success:r,error:n})}function o(e,r){t.remove(k,{id:e,success:r})}function i(e,r,n){t.create(k+"/"+e+"/job",{body:r,success:function(e){l(r),n(e)}})}function a(e,r,n,o){if(!r||!e||!r.toString)throw"wrong parameters";t.create(k+"/"+e+"/skill",{body:{skill_id:r.toString()},success:n,error:o})}function c(){return _}function u(){_=angular.copy(y)}function l(e){S.jobs.push(e)}function f(e){return S={},angular.forEach(e,function(e,t){this[t]=e},S),this}function s(){return S}function d(e){return S[e]}function g(){return b}function p(){var e=null;return angular.forEach(S.skills,function(t){e||t.id!==b||(e=t)}),e}function P(e){b=e}function m(){return h}function v(e){h=e}var h,b,k="/profile",y={name:"",email:"",can_delete:!1,jobs:[{occupation:"",companies:[{name:"",start_date:"",end_date:""}],start_date:"",end_date:""}],theme_name:""+(Math.floor(10*Math.random())+1)},_=angular.copy(y),S={};return{getCreateProfileData:c,resetCreateProfileData:u,getProfile:r,createProfile:n,deleteProfile:o,addJob:i,addProfileSkill:a,resetProfileData:f,getProfileData:s,getProfileProp:d,getActiveSkillId:g,getActiveSkill:p,setActiveSkillId:P,getIsGeneral:m,setIsGeneral:v}}]);
"use strict";angular.module("reviyouMobileApp").factory("pushNotificationsProvider",["$log","defaultProvider","deviceInfo","utils","appConfig",function(e,i,r,o,t){function n(i){e.debug("notification registration successhandler "+i)}function a(o){var t="/pushNotification/register/",n=r.getDeviceInfo();n.notification_token=o,e.debug("data to send: "+JSON.stringify(n)),i.create(t,{body:n,success:function(){e.debug("push token saved")},error:function(){e.error("push token not saved")}})}function d(i){e.error("notification registration error, errorHandler"+i)}return{onNotificationAndroid:function(t){switch(t.event){case"registered":if(t.regid.length>0){var n=r.getDeviceInfo();n.notification_token=t.regid,i.create("/pushNotification/register/",{body:n,success:function(){e.debug("android push token saved")},error:function(){e.error("failed to save push token")}}),e.debug("regID = "+t.regid)}break;case"message":t.foreground&&o.playMedia(t.soundname);break;case"error":e.error("error during android push notification received: "+t.msg);break;default:e.error("unexpected error during android push notification received")}},init:function(){try{var i=window.plugins.pushNotification;if(e.debug("pushNotification "+i),"android"==device.platform||"Android"==device.platform){var r=t.getAppConfig().googleParams;i.register(n,d,{senderID:r.project_id,ecb:"onNotificationAndroid"}),e.debug("pushNotification android registered")}else i.register(a,d,{badge:"true",sound:"true",alert:"true",ecb:"onNotificationAPN"})}catch(o){e.error("push notification initialization error: "+o.message)}}}}]);
"use strict";angular.module("reviyouMobileApp").factory("requestProvider",["defaultProvider",function(e){var r="/request/profile";return{addJobRequest:function(t,o,s){e.create(r+"/"+t+"/job",{body:o,success:s})},addCustomSkillRequest:function(t,o,s){e.create(r+"/"+t+"/skill",{body:{skill_name:o},success:s})},deleteProfileRequest:function(r,t){e.create("/request/delete_profile/"+r,{body:{profile_id:r},success:t})}}}]);
"use strict";angular.module("reviyouMobileApp").run(["$rootScope","$location","User","utils","$route","$log","$state","$ionicPopup","$ionicHistory","spinner","pushNotificationsProvider",function(e,t,n,a,o,i,r,l,s,u,c){function d(t){t.preventDefault(),r.is("blank.login")?navigator.app.exitApp():r.is("tabs.popular")?r.go("tabs.popular"):e.$broadcast("previousView")}function m(){angular.forEach(document.querySelectorAll("ion-header-bar"),function(t){var n=angular.element(t);n.addClass("theme-"+e.profileTheme)})}function p(){angular.forEach(document.querySelectorAll("ion-header-bar"),function(e){var t=angular.element(e);t.removeClass("theme-1 theme-2 theme-3 theme-4 theme-5 theme-6 theme-7 theme-8 theme-9 theme-10 theme-11 theme-12 theme-13  theme-14  theme-15")})}document.addEventListener("deviceready",function(){var e=a.getOAuthIOPublicKey();OAuth.initialize(e),"undefined"!=typeof analytics&&(analytics.startTrackerWithId(a.getAnalyticsKey()),a.getAnalyticsDebugMode()&&analytics.debugMode(),analytics.trackView("index")),c.init()},!1),document.addEventListener("backbutton",d,!1);e.$on("$stateChangeStart",function(t,a){n.getLoginStatus()||("tabs.profile"===a.name&&e.$broadcast("errorAlert","Authorization to Reviyou!","Please login first and retry given url."),"tabs.errorWithMessage"!==a.name&&"tabs.error"!==a.name&&"blank.signUp"!==a.name&&"blank.signUpSubmitted"!==a.name&&"blank.forgotPassword"!==a.name&&"blank.forgotPasswordSubmitted"!==a.name&&"blank.login"!==a.name&&(t.preventDefault(),r.transitionTo("blank.login",null,{reload:!0})))}),e.$on("$stateChangeSuccess",function(n,a,o,i){"undefined"!=typeof analytics&&analytics.trackView(t.path()),"tabs.profile"==i.name&&e.$broadcast("initProfileTopBarHeaderBugFixLeave"),"tabs.addSkill"!=i.name&&"tabs.addJob"!=i.name&&"tabs.profileCreate1"!=i.name||"tabs.profile"!=a.name||e.$broadcast("initProfileTopBarHeaderBugFixEnter")}),e.$on("$stateChangeError",function(){}),e.$on("$stateNotFound",function(){}),e.$on("successAlert",function(){l.alert({title:"Success!",template:"We received you request, please allow us some time to process it."})}),e.$on("successAlertCompleted",function(e,t){l.alert({title:"Success!",template:"Your request has been processed succesfully."}).then(function(){t()})}),e.$on("errorAlert",function(e,t,n){l.alert({title:t,template:n})}),e.$on("deleteConfirm",function(e,t){l.confirm({title:"Delete",template:"Are you sure you want to delete?",cancelText:"Cancel",cancelType:"button-dark",okText:"Delete",okType:"button-assertive"}).then(function(e){e&&t()})}),e.$on("previousView",function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.close(),s.goBack()}),e.$on("initProfileTopBarHeaderBugFixEnter",function(){m()}),e.$on("initProfileTopBarHeaderBugFixLeave",function(){p()})}]);
"use strict";angular.module("reviyouMobileApp").factory("searchProvider",["defaultProvider","$log","utils","User",function(e,r,a,s){var t="/search";return{search:function(a,u){r.debug("search, query:"+a);var c={query:a,tags:s.getSelectedTags().join()};e.fetch(t,{data:{params:c},success:function(e){u(e)}})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("skillProvider",["$q","defaultProvider","$log",function(e,r,l){function s(s){var i=e.defer();l.debug("getSkills, query:"+s);var u={tags:s};return r.fetch(t,{data:{params:u},success:function(e){i.resolve(e)}}),i.promise}var t="/skills";return{getSkills:s}}]);
"use strict";angular.module("reviyouMobileApp").factory("spinner",["$log","$injector",function(n,i){return{show:function(o){n.debug("showspinner");var e="<ion-spinner></ion-spinner>";i.get("$ionicLoading").show({template:e+(o||"Loading"),animation:"fade-in",noBackdrop:!1,showDelay:100,duration:2e6})},hide:function(){n.debug("hidespinner"),i.get("$ionicLoading").hide()}}}]);
"use strict";angular.module("reviyouMobileApp").factory("tagsProvider",["defaultProvider",function(a){var r="/tags";return{getTags:function(e,s){var t={offset:e};a.fetch(r,{data:{params:t},success:s})},search:function(e,s){var t={query:e};a.fetch(r+"/search",{data:{params:t},success:s})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("userProvider",["defaultProvider","User",function(e,t){var s="/user";return{saveTermsAgreement:function(t,a){e.create(s+"/"+t+"/terms_signed",{success:a})},logout:function(){t.getUserId()&&t.getAuthToken()?e.fetch("/logout",{success:t.clearUserData,error:t.clearUserData}):t.clearUserData},selectTag:function(t,a,r){e.create(s+"/"+t+"/addTag",{body:{tag_name:a},success:r})},deselectTags:function(t,a,r){e.create(s+"/"+t+"/removeTags",{body:{tag_names:a},success:r})},saveSoundSetting:function(t,a,r){e.create(s+"/"+t+"/changeSettings",{body:{settingName:"soundPreference",settingValue:a},success:r})},saveFollowSetting:function(t,a,r){e.create(s+"/"+t+"/changeSettings",{body:{settingName:"followingPreference",settingValue:a},success:r})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("User",["$log",function(t){function n(){return u.token}function e(t){u.userId=t}function o(){return u.userId}function i(){t.log("clearUserData"),u=angular.copy(r),window.localStorage.removeItem("reviyou_login")}function s(){u.timestamp=(new Date).getTime(),t.log("user save to  storage: "+JSON.stringify(u)),localStorage.setItem("reviyou_login",JSON.stringify(u))}function a(){(void 0===u.settings||null==u.settings||"undefined"==u.settings)&&(u.settings={ppSounds:!0,followOnComment:!1})}var u,r={isLoggedIn:!1,token:null,userId:null,notificationsCount:0,userData:{showname:"",terms_signed:!1,user_image_url:"",login_provider:"",email:null,tags:[],settings:{appSounds:!0,followOnComment:!1}}},g=window.localStorage.getItem("reviyou_login");if(void 0===g||null==g||"undefined"==g)u=angular.copy(r);else{u=JSON.parse(g);var l=(new Date).getTime(),f=u.timestamp+6048e5;l>f&&(u.isLoggedIn=!1)}return{getAuthToken:n,setUserId:e,getUserId:o,clearUserData:i,getNotificationsCount:function(){return u.notificationsCount},setNotificationsCount:function(t){u.notificationsCount=t},decrNotificationsCount:function(){u.notificationsCount>0&&u.notificationsCount--},setLoginStatus:function(t){return u.isLoggedIn=t,this},getLoginStatus:function(){return u.isLoggedIn},setSoundsEnabledOption:function(t){u.settings.appSounds=t,s()},getSoundsEnabledOption:function(){return a(),u.settings.appSounds},setFollowOnCommentOption:function(t){u.settings.followOnComment=t,s()},getFollowOnCommentOption:function(){return a(),u.settings.followOnComment},setUserData:function(t){return angular.forEach(t,function(t,n){u.userData.hasOwnProperty(n)&&(this[n]=t)},u.userData),this},addTag:function(t){for(var n=0;n<u.userData.tags.length;n++)if(u.userData.tags[n]===t)return;u.userData.tags.push(t),s()},removeTag:function(t){for(var n=0;n<u.userData.tags.length;n++)if(u.userData.tags[n]===t){u.userData.tags.splice(n,1);break}s()},getSelectedTags:function(){return(void 0===u.userData.tags||"undefined"==u.userData.tags)&&(u.userData.tags=[]),u.userData.tags},saveUserInStorage:function(){s()},getUserData:function(){return u.userData},getUserValue:function(t){return u.userData[t]},setAuthToken:function(t){u.token=t},setLoginProvider:function(t){u.userData.login_provider=t}}}]);
"use strict";angular.module("reviyouMobileApp").factory("utils",["appConfig","$log","$ionicScrollDelegate","$timeout","User",function(e,n,t,o,i){var a=e.getAppConfig(),r=a.apiHost;return{apiUrl:function(e){return r+e},playMedia:function(e){if(1==i.getSoundsEnabledOption()&&"undefined"!=typeof Media){var n=new Media(e);n.play()}},checkRequired:function(){angular.isUndefined(cordova)&&angular.isUndefined(Cordova)&&console.error("Cordova variable does not exist. Check that you have included cordova.js correctly"),angular.isUndefined(device)&&console.error("device variable does not exist. Check that you have included org.apache.cordova.device correctly"),angular.isUndefined(facebookConnectPlugin)&&console.error("facebookConnectPlugin variable does not exist. Check that you have included the Facebookconnect plugin.")},getOAuthIOPublicKey:function(){return a.oAuthIOPublicKey},getAnalyticsKey:function(){return a.analyticsKey},getAnalyticsDebugMode:function(){return a.analyticsDebugMode},getReviyouAppKey:function(){return a.ryAppId},isHttpFake:function(){return a.isHttpFake},dateFormat:function(e){return!angular.isString(e)&&Date.parse(e)},validateEmail:function(e){var n=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return n.test(e)?!0:!1},validatePassword:function(e){var n=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/;return n.test(e)},resizeScroll:function(){o(function(){t.resize()},1)},convertInputDateToString:function(e){if(e){n.debug(e);var t,o=e.split(/\/|-|[.]/);t=Date.parse(o[1].length>o[0].length?o[1]+"-"+o[0]:o);var i=t.toString();return n.debug(i),i}}}}]);
"use strict";angular.module("reviyouMobileApp").factory("voteProvider",["defaultProvider",function(e){var o="/vote",t="/votedProfiles",i="/hideVotedProfile";return{voteProfile:function(t,i){e.create(o,{body:{general_vote:t.generalVote,anonymous:t.anonymous,is_revote:t.is_revote},success:i,id:t.profile_id})},voteProfileSkill:function(t,i){e.create(o+"/"+t.profile_id+"/"+t.skill_id,{body:{vote_value:t.vote_value,anonymous:t.anonymous,is_revote:t.is_revote},success:i})},getVotedProfiles:function(o,i){var r={offset:o};e.fetch(t,{data:{params:r},success:function(e){i(e)}})},hideVotedProfile:function(o,t){e.update(i,{body:{},id:o,success:t})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("AuthorizationService",["$state","$timeout","$rootScope","defaultProvider","User","appConfig","deviceInfo","GoogleAuth","FacebookAuth","twitterAuth","reviyouAuth","$log","spinner","$ionicHistory","notificationsProvider",function(e,t,n,o,a,i,r,s,c,u,g,d,l,f,v){function h(){var t="tabs.popular";a.getUserValue("terms_signed")||(t="tabs.signterms"),l.hide(),f.clearCache(),a.getAuthToken().length>20&&a.setAuthToken(a.getAuthToken().substring(0,20)),a.saveUserInStorage(),v.checkRecentNotificationsCount(function(e){a.setNotificationsCount(e.newNotificationsCount)}),e.go(t)}function y(e){d.debug("successLoginHandler"),a.setUserId(e.userId),null==e.tags&&(e.tags=[]),a.setUserData({terms_signed:e.terms_signed,user_image_url:e.user_image_url,tags:e.tags,settings:e.settings}),"undefined"!=typeof analytics&&analytics.setUserId(e.userId)}function _(e){var n=e.loginProvider+"_login_metadata",a={login_provider:e.loginProvider,device:r.getDeviceInfo(),email:e.data.email,first_name:e.data.first_name,last_name:e.data.last_name,gender:e.data.gender,access_token:e.data.access_token};a[n]=e.data[n],o.create("/login",{body:a,withoutAuthData:!0,success:function(n){y(n),e.callback(n),t(function(){h()})}})}var m={facebook:c,google:s,twitter:u,reviyou:g};return{login:function(e,t){if(navigator&&navigator.network&&navigator.network.connection&&navigator.network.connection.type==Connection.NONE)return void n.$broadcast("errorAlert","Warning!","You have no internet connection, please try again later.");var o=m[e];"undefined"!=typeof analytics&&analytics.trackEvent("Category1","Login",e),"undefined"!=typeof l&&l.show(),o.login(_,t)}}}]);
"use strict";angular.module("reviyouMobileApp").factory("FacebookAuth",["appConfig","User","$log","spinner",function(e,n,i,o){function a(e){facebookConnectPlugin.api("me/?fields=id,email,first_name,last_name,gender",[],function(n){t(e,n)},function(e){i.error("error"+JSON.stringify(e))})}function t(e,n){facebookConnectPlugin.api("me/picture?redirect=0&height=80&type=normal&width=80",[],function(o){i.log("profileResponse response:"+JSON.stringify(o)),e(n,o)},function(o){i.error("error10"+JSON.stringify(o));var a={data:{is_silhouette:!0,url:"imagefullpath",width:80,height:80}};e(n,a)})}function r(e,n){var t=e.authResponse;t?(o.show("Signing in using Facebook..."),a(function(i,o){var a={email:i.email,access_token:t.accessToken,first_name:i.first_name,last_name:i.last_name,gender:i.gender,facebook_login_metadata:{expiresIn:t.expiresIn,fbUserId:t.userID,image_url:o.data.url,is_default_image:o.data.is_silhouette}};n({loginProvider:"facebook",data:a,callback:s(e,i)})})):(o.hide(),i.error.error("User cancelled login or did not fully authorize."))}function s(e,o){return i.debug("fb:successAuthorizationCallback"),function(){n.setLoginStatus("connected"===e.status),n.setAuthToken(e.authResponse.accessToken),n.setUserData(o),n.setLoginProvider("facebook"),n.setUserData({showname:o.first_name+" "+o.last_name,email:o.email})}}return{login:function(e){o.hide(),facebookConnectPlugin.login(["email"],function(n){r(n,e)},function(e){i.error("error2 response:"+e),o.hide(),"undefined"!=typeof analytics&&analytics.trackEvent("Category1","LoginCancel","facebook")})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("GoogleAuth",["$http","appConfig","User","defaultProvider","$log","spinner",function(e,o,n,t,r,i){function a(e){return d.auth+$.param({client_id:e.client_id,redirect_uri:e.redirect_uri,response_type:"code",scope:e.scope})}function c(e,o,n){$.post(d.token,{code:o[1],client_id:n.client_id,client_secret:n.client_secret,redirect_uri:n.redirect_uri,grant_type:"authorization_code"}).done(function(o){e.resolve(o)}).fail(function(o){r.error("error obtaining auth token"+JSON.stringify(o.responseJSON)),i.hide(),e.reject(o.responseJSON)})}function l(e,o){r.error("authCodeError"+JSON.stringify(o)),e.reject({error:o[1]})}function s(e){var o=$.Deferred(),n=a(e),t=window.open(n,"_blank","location=no,toolbar=no");return $(t).on("loadstart",function(n){var i=n.originalEvent.url,a=p.exec(i),s=_.exec(i);(a||s)&&t.close(),a?c(o,a,e):s&&(r.error("error"+s),l(o,s))}),o.promise()}function g(e){return r.debug("gg:onAfterSuccessBackendLogin"),function(){n.setLoginStatus(!0),n.setUserData(e),n.setLoginProvider("google"),n.setUserData({showname:e.name.givenName+" "+e.name.familyName,email:e.emails[0].value})}}function u(e,o){return function(n){angular.extend(o,{email:n.emails[0].value,first_name:n.name.givenName,last_name:n.name.familyName,gender:n.gender}),angular.extend(o.google_login_metadata,{googleUserId:n.id,image_url:n.image.url,is_default_image:n.image.isDefault}),e({loginProvider:"google",data:o,callback:g(n)})}}var d={auth:"https://accounts.google.com/o/oauth2/auth?",token:"https://accounts.google.com/o/oauth2/token",peopleget:"https://www.googleapis.com/plus/v1/people/me?callback=JSON_CALLBACK&access_token="},p=/\?code=(.+)$/,_=/\?error=(.+)$/;return{login:function(t){"undefined"!=typeof spinnerplugin&&i.show("Signing in using Goolge+...");var a=o.getAppConfig().googleParams,c={google_login_metadata:{}};s({client_id:a.client_id,client_secret:a.client_secret,redirect_uri:a.redirect_uri,scope:a.scope}).done(function(o){r.log("authorized, response: "+o),angular.extend(c,{access_token:o.access_token}),n.setAuthToken(o.access_token),angular.extend(c.google_login_metadata,{googleUserId:o.googleUserId,expiresIn:o.expires_in,idToken:o.id_token,refreshToken:o.refresh_token,tokenType:o.token_type}),e({method:"JSONP",url:d.peopleget+o.access_token}).success(u(t,c))}).fail(function(){r.error("google login failed"),i.hide(),"undefined"!=typeof analytics&&analytics.trackEvent("Category1","LoginCancel","google")})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("reviyouAuth",["appConfig","defaultProvider","User","$log","spinner","utils",function(e,t,a,n,o,i){function r(e){return n.debug("reviyou:onAfterSuccessBackendLogin"),function(){a.setLoginStatus(!0),a.setAuthToken(e.auth_token),a.setLoginProvider("reviyou"),a.setUserData(e),a.setUserData({showname:e.first_name+" "+e.last_name,email:e.email})}}return{login:function(e,a){var n={reviyou_login_metadata:{}};angular.extend(a,{reviyouAppId:i.getReviyouAppKey()}),t.create("/account/getToken",{body:a,withoutAuthData:!0,success:function(t){angular.extend(n,{access_token:t.auth_token,first_name:t.first_name,last_name:t.last_name,email:t.email,gender:"unknown"}),a.password="",e({loginProvider:"reviyou",data:n,callback:r(t)})}})}}}]);
"use strict";angular.module("reviyouMobileApp").factory("SignupService",["$state","$timeout","$rootScope","defaultProvider","appConfig","$log","spinner",function(t,e,s,r,a,o,n){function i(e){e.status>0?(o.error("response.status:"+e.status),s.$broadcast("errorAlert","Problem during signUp",e.error_message)):t.go("blank.signUpSubmitted")}function u(e){e.status>0?(o.error("response.status:"+e.status),s.$broadcast("errorAlert","Problem during reset",e.status+":"+e.error_message)):t.go("blank.forgotPasswordSubmitted")}var c={first_name:"",last_name:"",email:"",password:"",password_repeat:""},d={email:"",password:"",password_repeat:""};return{register:function(t){n.show(),"undefined"!=typeof analytics&&analytics.trackEvent("Login","Register",t.email),r.create("/signup",{body:t,withoutAuthData:!0,success:function(t){n.hide(),i(t)}})},resetPass:function(t){n.show(),"undefined"!=typeof analytics&&analytics.trackEvent("Login","Reset",t.email),r.create("/resetPassword",{body:t,withoutAuthData:!0,success:function(t){n.hide(),u(t)}})},initSignUpObj:function(){return angular.copy(c)},initResetPasswordobj:function(){return angular.copy(d)}}}]);
"use strict";angular.module("reviyouMobileApp").factory("twitterAuth",["appConfig","User","$log","spinner",function(t,e,n,a){function i(t,a){return n.debug("twtr:onAfterSuccessBackendLogin"),function(){e.setLoginStatus(!0),e.setUserData(a),e.setAuthToken(t.oauth_token),e.setLoginProvider("twitter"),e.setUserData({showname:a.name})}}return{login:function(t){var e={twitter_login_metadata:{}};OAuth.popup("twitter").done(function(r){r.get("/1.1/account/verify_credentials.json").done(function(n){var a=n.name.split(" ");angular.extend(e,{access_token:r.oauth_token,first_name:a[0],last_name:a[1]||" ",email:n.id+"@twitter.com",gender:"unknown"}),angular.extend(e.twitter_login_metadata,{twUserId:""+n.id,username:n.screen_name,is_default_image:n.default_profile_image,image_url:n.profile_image_url}),t({loginProvider:"twitter",data:e,callback:i(r,n)})}).fail(function(){n.error("ry exception: "+arguments),a.hide()})}).fail(function(){a.hide(),"undefined"!=typeof analytics&&analytics.trackEvent("Category1","LoginCancel","twitter")})}}}]);